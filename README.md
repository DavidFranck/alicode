# 项目介绍
alibaba interview

## 题目1
- 编写2个用户之间的转账接口及其内部实现
- 要求：完成接口设计、并实现其内部逻辑，以完成A用户转账给B用户的功能。2个用户的账户不在同一个数据库下。注意需要手写代码，尽量不要用伪代码。
- 提示：接口发布后会暴露给外部应用进行服务调用，请考虑接口规范、安全、幂等、重试、并发、有可能的异常分支、事务一致性、用户投诉、资金安全等的处理。

### 答
1. 定义ResResult,使用ResponseEntity<Result> 统一返回结构 接口使REST规范 
2. 使用validator  @Valid + 实体类注解 进行参数校验 保证安全性
3. 保证转账接口的幂等性,同一个交易号只能进行一次转账操作,如果已存在，则将存在的转账信息返回
2. 转账过程（A账户向B账户转账）需要在一个事务里,避免造成死锁,将系统中的账户排序,账户id小的先执行
3. 为了保证在并发情况下,同一时刻只允许一个线程操作转账过程中涉及到的账户,但是其他账户可以被其他线程操作，
   因此选择数据的行锁（Mysql InnoDB行锁 for update实现） 转账放在同一个事务中 失败的话两个sql同事回滚保持一致性
3. 用spring apo 切入需要打印日志的方法搜集日志便于查找问题



